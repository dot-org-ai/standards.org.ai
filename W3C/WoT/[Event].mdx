---
layout: event
source: W3C/WoT
$type: W3C/WoT/Event
$id: https://standards.org.ai/W3C/WoT/Event/{event.thing}/{event.name}
sameAs: https://standards.org.ai/Event/{event.thing}/{event.name}
canonical: https://w3.org.ai/WoT/Event/{event.thing}/{event.name}
params:
  - Event
schema:
  event:
    thing: ThingID
    name: EventName
    title: EventTitle
    description: EventDescription
    data: DataSchema
    dataResponse: DataResponse
    subscription: SubscriptionSchema
    cancellation: CancellationSchema
    forms: Forms
    uriVariables: URIVariables
    atType: SemanticType
---

# {event.title}

<EventHeader
  thing={event.thing}
  name={event.name}
  title={event.title}
/>

## Description

{event.description}

## Event Metadata

<EventMetadata event={event} />

### Event Signature

```json
{
  "title": "{event.title}",
  "description": "{event.description}",
  "data": {event.data}
}
```

## Event Data Schema

<EventDataSchema data={event.data} />

### Data Structure

```json
{event.data}
```

Events emit data conforming to this schema when they occur. Subscribers receive this data structure in event notifications.

## Data Response

<EventDataResponse dataResponse={event.dataResponse} />

## Subscription

<EventSubscriptionSchema subscription={event.subscription} />

### Subscription Lifecycle

1. **Subscribe** - Establish event listener
2. **Receive** - Handle event notifications
3. **Unsubscribe** - Clean up event listener

## Cancellation

<EventCancellationSchema cancellation={event.cancellation} />

## Protocol Bindings

<EventForms forms={event.forms} />

### Supported Protocols

<EventProtocolSupport forms={event.forms} />

## URI Variables

<EventURIVariables uriVariables={event.uriVariables} />

## Semantic Annotations

<EventSemanticTypes types={event.atType} />

## Usage Examples

### Subscribe to Event

```javascript
// Using WoT Scripting API
const thing = await WoT.consume(thingDescription);

thing.subscribeEvent('{event.name}', async (eventData) => {
  console.log('Event received:', eventData);
  // Handle event data
});
```

### Unsubscribe from Event

```javascript
// Store subscription handle
const subscription = await thing.subscribeEvent('{event.name}', handler);

// Later, unsubscribe
subscription.stop();
```

### Advanced Subscription Options

```javascript
// Subscribe with filtering or options
thing.subscribeEvent('{event.name}',
  async (data) => {
    console.log('Filtered event:', data);
  },
  {
    // Subscription options if supported
    filter: { /* criteria */ }
  }
);
```

## Protocol-Specific Examples

### Server-Sent Events (SSE)

<EventSSEExample event={event} />

```javascript
// Using Server-Sent Events over HTTP
const eventSource = new EventSource('https://thing.example.com/events/{event.name}');

eventSource.onmessage = (event) => {
  const data = JSON.parse(event.data);
  console.log('Event data:', data);
};

eventSource.onerror = (error) => {
  console.error('Connection error:', error);
  eventSource.close();
};

// Close when done
// eventSource.close();
```

### WebSocket

<EventWebSocketExample event={event} />

```javascript
// Using WebSocket for bi-directional communication
const ws = new WebSocket('wss://thing.example.com/events/{event.name}');

ws.onopen = () => {
  console.log('WebSocket connection established');
  // Send subscription message if needed
  ws.send(JSON.stringify({ action: 'subscribe' }));
};

ws.onmessage = (message) => {
  const eventData = JSON.parse(message.data);
  console.log('Event received:', eventData);
};

ws.onclose = () => {
  console.log('WebSocket connection closed');
};

// Close subscription
// ws.close();
```

### MQTT Subscription

<EventMQTTExample event={event} />

```javascript
// Using MQTT for pub/sub
const mqtt = require('mqtt');
const client = mqtt.connect('mqtt://broker.example.com');

client.on('connect', () => {
  // Subscribe to event topic
  client.subscribe('things/{event.thing}/events/{event.name}', (err) => {
    if (!err) {
      console.log('Subscribed to event');
    }
  });
});

client.on('message', (topic, message) => {
  const eventData = JSON.parse(message.toString());
  console.log('Event data:', eventData);
});

// Unsubscribe when done
// client.unsubscribe('things/{event.thing}/events/{event.name}');
```

### Long Polling

<EventLongPollingExample event={event} />

```javascript
// Long polling implementation
async function pollEvent() {
  try {
    const response = await fetch('https://thing.example.com/events/{event.name}', {
      method: 'GET',
      headers: {
        'Accept': 'application/json'
      }
    });

    if (response.ok) {
      const eventData = await response.json();
      console.log('Event data:', eventData);
      // Handle event
    }

    // Continue polling
    setTimeout(pollEvent, 100);
  } catch (error) {
    console.error('Polling error:', error);
    // Retry after delay
    setTimeout(pollEvent, 5000);
  }
}

pollEvent();
```

## Event Filtering

```javascript
// Client-side filtering
thing.subscribeEvent('{event.name}', async (data) => {
  // Apply custom filters
  if (data.value > threshold) {
    console.log('Important event:', data);
  }
});
```

## Error Handling

```javascript
thing.subscribeEvent('{event.name}',
  async (data) => {
    console.log('Event:', data);
  },
  (error) => {
    console.error('Subscription error:', error);
    // Handle reconnection
  }
);
```

## Event Buffering and Replay

```javascript
// Store recent events
const eventBuffer = [];
const maxBufferSize = 100;

thing.subscribeEvent('{event.name}', async (data) => {
  eventBuffer.push({
    timestamp: Date.now(),
    data: data
  });

  // Maintain buffer size
  if (eventBuffer.length > maxBufferSize) {
    eventBuffer.shift();
  }
});
```

## Parent Thing

<ThingLink id={event.thing} />

## Related Events

<RelatedEvents thing={event.thing} current={event.name} />

## Specification

<SpecificationLink spec="wot-thing-description" section="events" />

### References

- [WoT Thing Description - Event Affordance](https://www.w3.org/TR/wot-thing-description/#eventaffordance)
- [WoT Scripting API - subscribeEvent](https://www.w3.org/TR/wot-scripting-api/#the-subscribeevent-method)
- [Server-Sent Events Specification](https://html.spec.whatwg.org/multipage/server-sent-events.html)
- [WebSocket Protocol](https://datatracker.ietf.org/doc/html/rfc6455)
